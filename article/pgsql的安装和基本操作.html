<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pgsql的安装和基本操作</title>
    <link rel="icon" href="../static/img/favicon.png" type="image/png">
    <link rel="stylesheet" href="../static/css/styles.css"> <!-- 静态文件的链接 -->
    <!-- 引入 highlight.js 的 CSS 样式 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">

</head>
<body>
    <header>
        <div class="navbar container">
            <div class="menu">
                <div class="nav-title"><a href="/index.html">各自花开</a></div>
                <ul class="nav-menu">
                    
                        <li><a href="/index.html">首页</a></li>
                        <li><a href="/categories.html">分类</a>
                        <li><a href="/tags.html">标签</a>






                        <li><a href="webnav.html">网址导航</a></li>
                        <li><a href="https://www.baidu.com" target="_blank">资源分享
                        <!-- 外部链接图标 -->
                        <img src="../static/img/分享_share.png" alt="外部链接" style="position: absolute; top: 0; right: 0; width: 12px; height: 12px;transform: translateX(100%)">
                        </a></li>
                        <li><a href="/search.html">搜索</a></li>
                    
                </ul>
            </div>
        </div>
    </header>
    <div id="app" class="container">

            
            


        <div class="main container">
                
    <div class="content article-content">
        <h3>pgsql的安装和基本操作</h3>
        <div class="tag-container">
        








            
                <span>
                <img src="../static/img/标签_tag-one.png" class="img-icon">
                <a>linux</a>
            </span>
            
                <span>
                <img src="../static/img/标签_tag-one.png" class="img-icon">
                <a>pgsql</a>
            </span>
            

        </div>
        
        <div class="container article">
            <p>平时工作中，使用mysql的时候比较多，pgsql使用很少。所以接触的也少，偶尔一次小项目需要使用pgsql，于是记录一下，pgsql最基本的一些操作</p>
<h6>pgsql的安装</h6>
<!--more-->

<pre class="codehilite"><code>tar xvf xxx
./configure
make
su
make install
adduser postgres
mkdir /usr/local/pgsql/data
chown postgres /usr/local/pgsql/data
su - postgres
/usr/local/pgsql/bin/initdb -D /usr/local/pgsql/data
/usr/local/pgsql/bin/postgres -D /usr/local/pgsql/data &gt;logfile 2&gt;&amp;1 &amp;
/usr/local/pgsql/bin/createdb test
/usr/local/pgsql/bin/psql test
</code></pre>

<h6>设置pgsql必须密码登录</h6>
<pre class="codehilite"><code>vim pg_hba.conf

#host all all 127.0.0.1/32 trust
host all all 127.0.0.1/32 passowrd
</code></pre>

<h6>一些基本命令</h6>
<pre class="codehilite"><code>#创建用户
create user hbyc with password'LQ123er48vzz';
#创建数据库
create database ychbV1 with encoding='utf8' owner=hbyc;
#授权
grant all privileges on database ychbV1 to hbyc;
#登录
psql -Upostgres -dtest -h127.0.0.1
#查看已有数据库
\l
#查看表
\dt
#导入sql文件
psql -d ychbv1 -Uhbyc -h127.0.0.1 -f ychb.sql

#修改用户密码
alter user postgres with password'U5123ewqyjEi5';
#设置密码
\password postgres
</code></pre>

<h6>数据库备份</h6>
<p>下面是一个pgsql数据库备份的脚本</p>
<pre class="codehilite"><code>#通过变量设置pgsql相关信息
vim ~/.pgpass
格式如下
hostname：port：dbname：username：password 

#备份脚本
vim pgsql_backup.sh
#!/bin/bash
pg_dump -U dbuser -h 127.0.0.1 -p 5432 -f /data/db_backup/ychbv1_$(date +%Y%m%d_%H_%M_%S).sql
echo &quot;backup finished&quot;
</code></pre>
        </div>
        
    </div>



                


        </div>

    </div>
    <footer>
        
        <p>&copy; 2024 | 我的博客. 保留所有权利。</p>
    <!--    <p><a href="/privacy">隐私政策</a> | <a href="/terms">使用条款</a></p>-->
        
    </footer>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
 <!-- 在页面加载完成后启用代码高亮 -->
    <script>
        // 等待页面加载完成后执行高亮
        document.addEventListener('DOMContentLoaded', function() {
            // 启用 highlight.js 代码高亮
            hljs.highlightAll();
        });
    </script>


</html>