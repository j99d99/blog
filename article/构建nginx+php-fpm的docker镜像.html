<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>构建nginx+php-fpm的docker镜像</title>
    <link rel="icon" href="../static/img/favicon.png" type="image/png">
    <link rel="stylesheet" href="../static/css/styles.css"> <!-- 静态文件的链接 -->
    <!-- 引入 highlight.js 的 CSS 样式 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">

</head>
<body>
    <header>
        <div class="navbar container">
            <div class="menu">
                <div class="nav-title"><a href="/index.html">各自花开</a></div>
                <ul class="nav-menu">
                    
                        <li><a href="/index.html">首页</a></li>
                        <li><a href="/categories.html">分类</a>
                        <li><a href="/tags.html">标签</a>






                        <li><a href="webnav.html">网址导航</a></li>
                        <li><a href="https://www.baidu.com" target="_blank">资源分享
                        <!-- 外部链接图标 -->
                        <img src="../static/img/分享_share.png" alt="外部链接" style="position: absolute; top: 0; right: 0; width: 12px; height: 12px;transform: translateX(100%)">
                        </a></li>
                        <li><a href="/search.html">搜索</a></li>
                    
                </ul>
            </div>
        </div>
    </header>
    <div id="app" class="container">

            
            


        <div class="main container">
                
    <div class="content article-content">
        <h3>构建nginx+php-fpm的docker镜像</h3>
        <div class="tag-container">
        








            
                <span>
                <img src="../static/img/标签_tag-one.png" class="img-icon">
                <a>docker</a>
            </span>
            
                <span>
                <img src="../static/img/标签_tag-one.png" class="img-icon">
                <a>Dockerfile</a>
            </span>
            

        </div>
        
        <div class="container article">
            <p><strong>说明</strong>
    此Dockerfile整合了nginx和php-fpm环境</p>
<!--more-->

<pre class="codehilite"><code class="language-yaml">FROM centos:7
MAINTAINER chognlai

RUN yum install -y wget epel-release &amp;&amp; \
        wget https://rpms.remirepo.net/enterprise/remi-release-7.rpm \
        &amp;&amp; rpm -vih remi-release-7.rpm \
        &amp;&amp; yum install -y php74-php-fpm php74-php-gd php74-php-mbstring


COPY nginx-1.19.1.tar.gz /tmp
RUN tar -xvf /tmp/nginx-1.19.1.tar.gz -C /tmp/ \
        &amp;&amp; cd /tmp/nginx-1.19.1 \
        &amp;&amp; yum install -y gcc-c++ gd-devel pcre-devel openssl-devel make \
        &amp;&amp; useradd nginx -s /sbin/nologin \
        &amp;&amp; ./configure --prefix=/usr/local/nginx \
        --conf-path=/etc/nginx/nginx.conf \
        --modules-path=/etc/nginx/  \
        --sbin-path=/usr/sbin/nginx \
        --user=nginx --group=nginx \
        --with-http_ssl_module \
        --with-http_realip_module \
        --with-http_addition_module \
        --with-http_image_filter_module \
        --with-http_sub_module \
        --with-http_dav_module \
        --with-http_flv_module \
        --with-http_mp4_module \
        --with-http_gzip_static_module  \
        --with-http_random_index_module \
        --with-http_secure_link_module \
        --with-http_degradation_module  \
        --with-http_stub_status_module \
        --with-debug \
        --with-http_realip_module  \
        --with-stream \
        --with-stream_ssl_preread_module \
        &amp;&amp; make &amp;&amp; make install

COPY nginx.conf /etc/nginx/
EXPOSE 80 443
VOLUME /etc/nginx/vhosts

CMD /opt/remi/php74/root/sbin/php-fpm &amp;&amp; nginx -g &quot;daemon off;&quot;
</code></pre>
        </div>
        
    </div>



                


        </div>

    </div>
    <footer>
        
        <p>&copy; 2024 | 我的博客. 保留所有权利。</p>
    <!--    <p><a href="/privacy">隐私政策</a> | <a href="/terms">使用条款</a></p>-->
        
    </footer>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
 <!-- 在页面加载完成后启用代码高亮 -->
    <script>
        // 等待页面加载完成后执行高亮
        document.addEventListener('DOMContentLoaded', function() {
            // 启用 highlight.js 代码高亮
            hljs.highlightAll();
        });
    </script>


</html>