<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>运维监控-prometheus常用监控示例</title>
    <link rel="icon" href="../static/img/favicon.png" type="image/png">
    <link rel="stylesheet" href="static/css/styles.css"> <!-- 静态文件的链接 -->
    <!-- 引入 highlight.js 的 CSS 样式 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css">

</head>
<body>
    <header>
        <div class="navbar container">
            <div class="menu">
                <div class="nav-title"><a href="/index.html">各自花开</a></div>
                <ul class="nav-menu">
                    
                        <li><a href="/index.html">首页</a></li>
                        <li><a href="/categories.html">分类</a>
                        <li><a href="/tags.html">标签</a>






                        <li><a href="webnav.html">网址导航</a></li>
                        <li><a href="https://www.baidu.com" target="_blank">资源分享
                        <!-- 外部链接图标 -->
                        <img src="../static/img/分享_share.png" alt="外部链接" style="position: absolute; top: 0; right: 0; width: 12px; height: 12px;transform: translateX(100%)">
                        </a></li>
                        <li><a href="/search.html">搜索</a></li>
                    
                </ul>
            </div>
        </div>
    </header>
    <div id="app" class="container">

            
            


        <div class="main container">
                
    <div class="content article-content">
        <h3>运维监控-prometheus常用监控示例</h3>
        <div class="tag-container">
        








            
                <span>
                <img src="../static/img/标签_tag-one.png" class="img-icon">
                <a>monitor</a>
            </span>
            
                <span>
                <img src="../static/img/标签_tag-one.png" class="img-icon">
                <a>prometheus</a>
            </span>
            

        </div>
        
        <div class="container article">
            <h3>常用监控指标示例</h3>
<p>linux系统监控模板
https://grafana.com/grafana/dashboards/8919</p>
<h4>内存使用率</h4>
<p>使⽤率 = 1 - （实际可⽤内存 / 总内存）* 100
总内存: node_memory_MemTotal_bytes
Cached内存: node_memory_Cached_bytes
Buffers内存:   node_memory_Buffers_bytes
可用内存:   node_memory_MemAvailable_bytes</p>
<p>内存使用率:
    公式：(1 - (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes ))* 100
可用内存（单位：M）</p>
<p>公式：node_memory_MemAvailable_bytes / 1024 / 1024</p>
<h4>硬盘io使用情况</h4>
<p>((rate(node_disk_read_bytes_total[1m] )+ rate(node_disk_written_bytes_total[1m])) / 1024 /1024) &gt; 0 </p>
<p>硬盘使⽤率 是 read + written 读和写 都会占⽤IO /1024 两次后 就由 bytes =&gt; Mbs</p>
<h4>硬盘使用情况</h4>
<p>磁盘总大小: node_filesystem_size_bytes
磁盘剩余空间:   node_filesystem_avail_bytes</p>
<p>磁盘总大小（单位: G）</p>
<p>公式：node_filesystem_size_bytes {fstype=~"ext4|xfs"} / 1024 / 1024 / 1024</p>
<p>磁盘剩余大小（单位: G）</p>
<p>公式：node_filesystem_avail_bytes {fstype=~"ext4|xfs"}  / 1024 / 1024 / 1024</p>
<p>磁盘使用率
　　公式：(1-(node_filesystem_free_bytes{fstype=~"ext4|xfs"} / node_filesystem_size_bytes{fstype=~"ext4|xfs"})) * 100</p>
<h4>网卡流量</h4>
<p>网卡入网流量 （指定某一个网卡，比如ens32）</p>
<p>公式：irate(node_network_receive_bytes_total{device='ens32'}[5m])</p>
<p>网卡出网流量（指定某一个网卡，比如ens32）</p>
<p>公式：irate(node_network_transmit_bytes_total{device='ens32'}[5m])</p>
<h4>cpu使用情况</h4>
<p>CPU使用率</p>
<p>公式：100 - (avg by (instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)</p>
<p>CPU负载</p>
<p>公式：</p>
<p>node_load1     ## 1分钟负载</p>
<p>node_load5     ##5分钟负载</p>
<p>node_load15   ##15分钟负载</p>
<h4>docker容器监控</h4>
<h4>tcp连接数监控</h4>
        </div>
        
    </div>



                


        </div>

    </div>
    <footer>
        
        <p>&copy; 2024 | 我的博客. 保留所有权利。</p>
    <!--    <p><a href="/privacy">隐私政策</a> | <a href="/terms">使用条款</a></p>-->
        
    </footer>

</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
 <!-- 在页面加载完成后启用代码高亮 -->
    <script>
        // 等待页面加载完成后执行高亮
        document.addEventListener('DOMContentLoaded', function() {
            // 启用 highlight.js 代码高亮
            hljs.highlightAll();
        });
    </script>


</html>